<p><font size="5"><strong>-new_console and -cur_console switches</strong></font> <ul><li><a href="#Purpose">Purpose</a></li><li><a href="#Exclusions">Exclusions</a></li><li><a href="#The_difference">The difference</a></li><li><a href="#Syntax">Syntax</a></li><ul><li><a href="#Important_notes">Important notes</a></li></ul><li><a href="#Examples">Examples</a></li><ul><li><a href="#Example_1">Example 1</a></li><li><a href="#Example_2">Example 2</a></li><li><a href="#Example_3">Example 3</a></li><li><a href="#Example_4_(Far_Manager_related)">Example 4 (Far Manager related)</a></li><li><a href="#Example_5">Example 5</a></li><li><a href="#Example_6_(Split_Screen)">Example 6 (Split Screen)</a></li></ul></ul>  </p>
<h1><a name="Purpose"></a>Purpose<a href="#Purpose" class="section_anchor"></a></h1>
<p>‘-new_console’ and ‘-cur_console’ switches used to modify behavior of the ConEmu tabs and splits (new or existing). Few examples below. </p>
<p>Within ConEmu Tasks you may explicitly set color palette for creating tab: </p>
<pre class="prettyprint">sh.exe --login -i -new_console:P:&quot;Palette&quot;</pre>
<p>Or, from your shell prompt (e.g. cmd.exe started in ConEmu) you can start PuTTY (or any other simple GUI applications) in the new ConEmu tab (or split): </p>
<pre class="prettyprint">PuTTY.exe -new_console -load &quot;yourserver&quot;</pre>
<p>Or, if you need to run some script with disabled ‘<a href="ConEmuHk.html">Inject ConEmuHk</a>’ from your shell prompt running in the ConEmu tab, you may use ‘-cur_console:i’ switch. </p>
<pre class="prettyprint">cmd /c -cur_console:i MyBatch.cmd BatchArg1 ... BatchArgN</pre>
<p>Switches may be used in the: </p>
<ul><li>ConEmu command line (<tt>/cmd</tt> or <tt>/cmdlist</tt> from <a href="Command_Line.html">ConEmu.exe arguments</a> or ‘Command line’ from the <a href="Settings.html#Startup">Settings</a>); </li><li>ConEmu <a href="Settings.html#Tasks">Tasks</a> (commands area); </li><li>your shell prompt started in ConEmu (‘<a href="ConEmuHk.html">Inject ConEmuHk</a>’ must be enabled in the <a href="Settings.html#Features">Settings</a>); </li><li>and at last within switches of console application running with Default terminal feature. </li></ul><p>You must <strong>not</strong> specify them as ConEmu(64).exe or ConEmuC(64).exe arguments. Specify them AFTER <tt>/cmd</tt> or <tt>/cmdlist</tt> (ConEmu.exe) and <tt>/c</tt> or <tt>/k</tt> (ConEmuC.exe) if you need to use them with ConEmu&#x27;s executables command line. </p>
<pre class="prettyprint">ConEmu.exe /cmdlist cmd ||| powershell -new_console:sV</pre>
<h1><a name="Exclusions"></a>Exclusions<a href="#Exclusions" class="section_anchor"></a></h1>
<p>Sometimes, you may need to disable processing of ‘-new_console’ and ‘-cur_console’ switches at all. For example, you need to create git commit with <tt>-new_console</tt> in the commit message, or create string value in the registry, using <tt>reg.exe</tt> tool. There are several ways to disable or skip processing of these switches. </p>
<ul><li>Option ‘Process -new_console and -cur_console switches’ on the <a href="Settings.html#Features">Features</a> Settings page. When you disable that option swithes will not be processed when you run something from your shell prompt or scripts (inside ConEmu tabs). </li><li>Using single quotes or backslashes, examples below. </li><pre class="prettyprint">git commit -m &quot;Fix behavior of the &#x27;-new_console&#x27; switches&quot;
reg.exe add &quot;HKCU\command&quot; /ve /t REG_EXPAND_SZ /d &quot;\&quot;C:\ConEmu\ConEmuPortable.exe\&quot; /Dir \&quot;%V\&quot; /cmd \&quot;cmd.exe\&quot; \&quot;-new_console:nC:cmd.exe\&quot; \&quot;-cur_console:d:%V\&quot;&quot; /f</pre>
<li>Switches will not be processed <strong>after</strong> the one of the ConEmu&#x27;s executables: <tt>ConEmu(64).exe</tt>, <tt>ConEmuC(64).exe</tt> or <tt>ConEmuPortable.exe</tt>. For example, when you run <tt>ConEmu.exe</tt> from your shell prompt, switch ‘-new_console’ will be applied to the tab started in the <strong>new</strong> ConEmu window, and doesn&#x27;t create new tab with one ConEmu window <strong>inside</strong> another ConEmu window. <strong>Note</strong> This behavior first introduced in the build 140220. </li><pre class="prettyprint">ConEmu /cmd PowerShell.exe -new_console:h9999</pre>
<li>Using <a href="ConEmuEnvironment.html">environment</a> shell variable <tt>ConEmuHooks</tt> within your scripts (<tt>rungit.cmd</tt> for example). </li><pre class="prettyprint">rem Call &quot;setlocal&quot; to restrict environment change to that batch only
setlocal
rem Disable processing of the -new_console switch
set ConEmuHooks=NOARG
rem And now you are safe to run your command
git -am &quot;Commit message with -new_console argument&quot;</pre>
</ul><h1><a name="The_difference"></a>The difference<a href="#The_difference" class="section_anchor"></a></h1>
<p>What is the difference between ‘-new_console’ and ‘-cur_console’? </p>
<p>‘-new_console’ always creates new tab in ConEmu, while ‘-cur_console’ not. </p>
<p>So, some of switches used with ‘-cur_console’ does not have any effect. </p>
<p>On the other hand, using them in ConEmu&#x27;s tasks or command line, both ‘-new_console’ and ‘-cur_console’ has the same effect. </p>
<h1><a name="Syntax"></a>Syntax<a href="#Syntax" class="section_anchor"></a></h1>
<p>When you run application from existing ConEmu tab, or starting new tab from ConEmu interface, you may use ‘-new_console’ or ‘-cur_console’ switches. </p>
<p><strong>Warning</strong> ‘-new_console’, ‘-cur_console’ and all subswitches are <strong>case sensitive</strong>. </p>
<pre class="prettyprint">  -new_console[:switches]
  or
  -cur_console[:switches]
     a - RunAs shell verb (as Admin on Vista+, user/pwd in Win2k and WinXP)
     b - create background tab
     c - force enable &#x27;Press Enter or Esc to close console&#x27; (default)
     C:&quot;&lt;iconfile&gt;&quot; - specify icon used in tab
     d:&quot;&lt;dir&gt;&quot; - specify working directory
     f - force starting console active, useful when starting several consoles simultaneously
     h&lt;height&gt; - i.e., h0 - turn buffer off, h9999 - switch to 9999 lines
     i - don&#x27;t inject ConEmuHk into starting process
     I - (GuiMacro only) forces inheriting of root process contents, like &quot;Duplicate root&quot; feature
     n - disable &#x27;Press Enter or Esc to close console&#x27;
     o - don&#x27;t enable &#x27;Long console output&#x27; when starting command from Far Manager
     P:&quot;&lt;palettename&gt;&quot; - set fixed palette for tab
     r - run as restricted user
     R - force start hooks server in the parent process
     s[&lt;SplitTab&gt;T][&lt;Percents&gt;](H|V) - run new console in a split
     t:&quot;&lt;tabname&gt;&quot; - rename new created tab
     u - ConEmu choose user dialog
     u:&quot;&lt;user&gt;:&lt;pwd&gt;&quot; - specify user/pwd in args
     w - Enable &#x27;Overwrite&#x27; mode in command prompt by default
     W:&quot;&lt;tabwallpaper&gt;&quot; - use specified wallpaper for the tab
     z - Don&#x27;t use &#x27;Default terminal&#x27; feature for this command</pre>
<h2><a name="Important_notes"></a>Important notes<a href="#Important_notes" class="section_anchor"></a></h2>
<ul><li>Option ‘<a href="ConEmuHk.html">Inject ConEmuHk</a>’ <strong>must be enabled</strong> in ConEmu settings if you want to use these switches in your shell prompt (CLI). </li><li>These switches are shown in ConEmu ‘About’ dialog (Win+Alt+A). </li><li>The ‘s’ switch is complicated, look at examples below. </li><li>‘-new_console’ is one of the ways to start <strong>GUI</strong> application from existing tab in the new ConEmu tab. </li><li>Several switches in one command may be used, ‘-new_console:b -new_console:h9999’ and ‘-new_console:bh9999’ are equal. </li><li>While you create new tab from ConEmu GUI interface, ‘-new_console’ and ‘-cur_console’ have the same effect. </li><li>These are NOT a switches of ConEmuC, specify them as application (far, vim, putty, etc.) switches. </li><li>You may put multiple simple or quoted string switches delimited with colon, example: </li><pre class="prettyprint">cmd -new_console:a:bc:d:&quot;c:\users\Pete&quot;:u:&quot;Pete:password&quot;`</pre>
<li>You may need to escape special symbols <strong><tt>&lt;&gt;()&amp;|^&quot;</tt></strong> with <tt>^</tt> symbol, example: </li><pre class="prettyprint">cmd -new_console:P:&quot;^&lt;PowerShell^&gt;&quot;</pre>
</ul><p><!-- ==If you need to pass same name argument to console program==Hm, in this really rare case (I have not know any program at that moment) you may use following form
 </p>
<pre class="prettyprint">program.exe -new_console:- -new_console ‘other arguments’</pre>
<p>!ConEmu will strip &quot;-new_console:-&quot; and stop processing of command line, so real command will be executed
 </p>
<pre class="prettyprint">program.exe -new_console ‘other arguments’</pre>
<p>--> </p>
<h1><a name="Examples"></a>Examples<a href="#Examples" class="section_anchor"></a></h1>
<p><strong>Note</strong>. In some cases ‘-new_console’ can not be intercepted (e.g. starting batches or internal commands from command processor itself). In this cases you owe to use the ‘prefix’ before actual command! </p>
<h2><a name="Example_1"></a>Example 1<a href="#Example_1" class="section_anchor"></a></h2>
<p>Starts &quot;`dir c:\ /s&quot; in new background ConEmu tab, set buffer height to 9999 lines, do not close tab after &quot;dir&quot; completion. </p>
<pre class="prettyprint">&quot;%ConEmuBaseDir%\ConEmuC.exe&quot; /c dir &quot;-new_console:bh9999c&quot; c:\ /s</pre>
<h2><a name="Example_2"></a>Example 2<a href="#Example_2" class="section_anchor"></a></h2>
<p>Starts &quot;<tt>vim.exe c:\sources\1.cpp</tt>&quot; in new ConEmu tab, disable buffer scrolling (buffer height will be equal to window height), do not show &#x27;Press Enter or Esc to close console&#x27; after exiting vim. </p>
<pre class="prettyprint">vim.exe -new_console:nh0 c:\sources\1.cpp</pre>
<h2><a name="Example_3"></a>Example 3<a href="#Example_3" class="section_anchor"></a></h2>
<p>Starts &quot;<tt>cmd.exe</tt>&quot; in specified directory with specified login/username (Nick) and password (pwd). </p>
<pre class="prettyprint">cmd.exe &quot;-new_console:d:C:\Users\Nick&quot; &quot;-new_console:u:Nick:pwd&quot;</pre>
<h2><a name="Example_4_(Far_Manager_related)"></a>Example 4 (Far Manager related)<a href="#Example_4_(Far_Manager_related)" class="section_anchor"></a></h2>
<p>Starts &quot;<tt>hiew.exe c:\tools\app.exe</tt>&quot; in <strong>current</strong> ConEmu tab, do not enabling buffer scrolling (buffer height will be equal to window height). </p>
<pre class="prettyprint">hiew.exe -cur_console:h0 c:\tools\app.exe</pre>
<h2><a name="Example_5"></a>Example 5<a href="#Example_5" class="section_anchor"></a></h2>
<p>Starts PuTTY in new ConEmu tab. </p>
<pre class="prettyprint">putty -new_console</pre>
<h2><a name="Example_6_(Split_Screen)"></a>Example 6 (Split Screen)<a href="#Example_6_(Split_Screen)" class="section_anchor"></a></h2>
<p>Split current tab, new tab will be created to the right, both tabs becomes 50% width of active tab. </p>
<pre class="prettyprint">cmd -new_console:s</pre>
<p>or </p>
<pre class="prettyprint">cmd -new_console:s50H</pre>
<p>Split current tab, create new tab to the bottom. </p>
<pre class="prettyprint">cmd -new_console:sV</pre>
<p>Split 3-d tab, create new tab to the right with 30% width. </p>
<pre class="prettyprint">cmd -new_console:s3T30H</pre>
<p>You may also create named task with several cmd&#x27;s. Next example creates four cmd.exe consoles in a grid 2x2. </p>
<pre class="prettyprint">&gt;cmd -cur_console:n
cmd -cur_console:s1TVn
cmd -cur_console:s1THn
cmd -cur_console:s2THn</pre>

